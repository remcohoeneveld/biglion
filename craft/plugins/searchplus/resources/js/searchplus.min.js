!function($){$.fn.searchplus=function(e){function t(){var e=["attribute:*"];""!==w.state.query.trim()&&e.push("query"),0!==w.state.page&&e.push("page"),w.state.index!==g&&e.push("index");var t=window.location.search.slice(1),a=algoliasearchHelper.AlgoliaSearchHelper.getForeignConfigurationInQueryString(t),n=window.location.hash,i=w.getStateAsQueryString({filters:e,moreAttributes:a});if(t!==i){var r=Date.now();y>r?window.history.replaceState({searchplus:!0},"","?"+i+n):window.history.pushState({searchplus:!0},"","?"+i+n),y=r+x}}function a(){var e=window.location.search.slice(1),t=algoliasearchHelper.AlgoliaSearchHelper.getConfigurationFromQueryString(e);t.query&&f.val(t.query),t.index&&$sortBySelect.val(t.index.replace(g,"")),w.overrideStateWithoutTriggeringChangeEvent(w.state.setQueryParameters(t))}function n(e){for(facetIndex=0;facetIndex<b.length;++facetIndex){var t=b[facetIndex],a=$("#"+t+"-slider"),n={type:"double",grid:!0,min:a.data("min"),max:a.data("max"),from:a.data("from"),to:a.data("to"),prettify:function(e){return"Â£"+parseInt(e,10)},onFinish:function(a){var n=e.getNumericRefinement(t,">=");n=n&&n[0]||a.min,a.from!==n&&(w.removeNumericRefinement(t,">="),w.addNumericRefinement(t,">=",a.from).search());var i=e.getNumericRefinement(t,"<=");i=i&&i[0]||a.max,a.to!==i&&(w.removeNumericRefinement(t,"<="),w.addNumericRefinement(t,"<=",a.to).search())}};a.ionRangeSlider(n)}}function i(e){$hits.html(P.render(e)),$hits.addClass("active")}function r(e,t){for(var a="",n=0;n<R.length;++n){var i=R[n],r=e.getFacetByName(i);if(r){var s={};if(-1!==$.inArray(i,b)){s={facet:i,title:F[i]},s.min=r.stats.min,s.max=r.stats.max;var c=t.getNumericRefinement(i,">=")||s.min,o=t.getNumericRefinement(i,"<=")||s.max;s.from=Math.min(s.max,Math.max(s.min,c)),s.to=Math.min(s.max,Math.max(s.min,o)),a+=N.render(s)}else s={facet:i,title:F[i],values:e.getFacetValues(i,{sortBy:["isRefined:desc","count:desc"]}),disjunctive:-1!==$.inArray(i,h.disjunctiveFacets)},a+=C.render(s)}}$facets.html(a)}function s(e){var t={nbHits:e.nbHits,nbHits_plural:1!==e.nbHits,processingTimeMS:e.processingTimeMS};$stats.html(j.render(t))}function c(e){if(e.nbHits>0)return void $main.removeClass("no-results");$main.addClass("no-results");var t=[],a,n;for(a in w.state.facetsRefinements)t.push({"class":"toggle-refine",facet:a,facet_value:w.state.facetsRefinements[a],label:F[a]+": ",label_value:w.state.facetsRefinements[a]});for(a in w.state.disjunctiveFacetsRefinements)for(n in w.state.disjunctiveFacetsRefinements[a])t.push({"class":"toggle-refine",facet:a,facet_value:w.state.disjunctiveFacetsRefinements[a][n],label:F[a]+": ",label_value:w.state.disjunctiveFacetsRefinements[a][n]});for(a in w.state.numericRefinements)for(n in w.state.numericRefinements[a])t.push({"class":"remove-numeric-refine",facet:a,facet_value:n,label:F[a]+" ",label_value:n+" "+w.state.numericRefinements[a][n]});$hits.html(I.render({query:e.query,filters:t}))}function o(e){var t=[];e.page>3&&(t.push({current:!1,number:1}),t.push({current:!1,number:"...",disabled:!0}));for(var a=e.page-3;a<e.page+3;++a)0>a||a>=e.nbPages||t.push({current:e.page===a,number:a+1});e.page+3<e.nbPages&&(t.push({current:!1,number:"...",disabled:!0}),t.push({current:!1,number:e.nbPages}));var n={pages:t,prev_page:e.page>0?e.page:!1,next_page:e.page+1<e.nbPages?e.page+2:!1};$pagination.html(D.render(n))}"undefined"==typeof e&&(e={});var f=$("undefined"!=typeof e.input?e.input:"#searchinput"),u=$("undefined"!=typeof e.form?e.form:"#searchform"),l=$("undefined"!=typeof e.resultsContainer?e.resultsContainer:"#results"),d=$("undefined"!=typeof e.paginationContainer?e.paginationContainer:"#pagination"),m="undefined"!=typeof e.applicationId?e.applicationId:u.attr("data-applicationId"),p="undefined"!=typeof e.searchApiKey?e.searchApiKey:u.attr("data-searchApiKey"),g="undefined"!=typeof e.index?e.index:u.attr("data-index"),h={hitsPerPage:"undefined"!=typeof e.hitsPerPage?e.hitsPerPage:25,maxValuesPerFacet:"undefined"!=typeof e.maxValuesPerFacet?e.maxValuesPerFacet:10,facets:"undefined"!=typeof e.facets?e.facets:[],disjunctiveFacets:"undefined"!=typeof e.disjunctiveFacets?e.disjunctiveFacets:[]},v="undefined"!=typeof e.searchOnLoad?e.searchOnLoad:!0,y=Date.now(),x=700,b="undefined"!=typeof e.facetsSlider?e.facetsSlider:[],R="undefined"!=typeof e.facetsOrderOfDisplay?e.facetsOrderOfDisplay:h.facets.concat(h.disjunctiveFacets),F="undefined"!=typeof e.facetsLabels?e.facetsLabels:[],S="undefined"!=typeof e.facetsForcedRefinement?e.facetsForcedRefinement:[],H=algoliasearch(m,p),w=algoliasearchHelper(H,g,h);$pagination=d,$hits=l,$inputIcon=$("#search-input-icon"),$main=$("main"),$sortBySelect=$("#sort-by-select"),$stats=$("#stats"),$facets=$("#facets");var P=Hogan.compile($("#hit-template").text()),j=Hogan.compile($("#stats-template").text()),C=Hogan.compile($("#facet-template").text()),D=Hogan.compile($("#pagination-template").text()),I=Hogan.compile($("#no-results-template").text()),N=Hogan.compile($("#slider-template").text());f.on("keyup",function(){var e=$(this).val();w.setQuery(e).search()}).focus(),w.on("change",function(e){t()}),w.on("result",function(e,t){i(e),s(e),o(e),r(e,t),n(t),c(e)}),$sortBySelect.on("change",function(e){e.preventDefault(),w.setIndex(g+$(this).val()).search()}),1==v&&(a(),w.search());for(var A in S)if("string"!=typeof S[A])for(var _ in S[A])w.addDisjunctiveFacetRefinement(A,S[A][_]);else w.addDisjunctiveFacetRefinement(A,S[A]);$(document).on("click",".go-to-page",function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},"500","swing"),w.setCurrentPage(+$(this).data("page")-1).search()}),$(document).on("click",".remove-numeric-refine",function(e){e.preventDefault(),w.removeNumericRefinement($(this).data("facet"),$(this).data("value")).search()}),$(document).on("click",".clear-all",function(e){e.preventDefault(),f.val("").focus(),w.setQuery("").clearRefinements().search()}),$(document).on("click",".toggle-refine",function(e){e.preventDefault(),w.toggleRefine($(this).data("facet"),$(this).data("value")).search()}),window.addEventListener("popstate",function(e){null!=e.state&&(a(),w.search())})}}(jQuery);